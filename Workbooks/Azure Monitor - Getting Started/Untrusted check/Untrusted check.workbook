{
  "version": "Notebook/1.0",
  "items": [
    {
      "type": 1,
      "content": {
        "json": "# untrusted tests\r\n\r\n1. open with `feature.workbookGalleryBranch` set should prompt to run post if you open this content\r\n2. open with `feature.workbookGalleryRedirect` set should prompt to run post if you open this content\r\n3. open with `NewNotebookData` should prompt to run post if you open this \r\n4. open with `ItemsToAdd` (send to workbooks) should prompt to run post if you open this \r\n5. open where `ConfigurationId` is a URL should prompt to run post if you open this.\r\n\r\nAll in `UsageNotebookBlade`  blade AND `WorkbookViewerBlade`\r\n\r\nthe below query does a POST to ARM `/batch` that should be blocked by default in untrusted locations\r\n\r\nbelow that is one that does POST to ARM `/batch` that should be blocked by because it tries to do a `DELETE` inside (does batch even alow that?)"
      },
      "name": "text - 0"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "{\"version\":\"ARMEndpoint/1.0\",\"data\":\"{\\r\\n\\t\\\"requests\\\": [\\r\\n\\t\\t{ \\\"httpMethod\\\": \\\"GET\\\", \\\"url\\\": \\\"/locations?api-version=2019-06-01\\\" }\\r\\n\\t]\\r\\n}\",\"headers\":[],\"method\":\"POST\",\"path\":\"/batch?api-version=2019-06-01\",\"urlParams\":[],\"batchDisabled\":false,\"transformers\":[{\"type\":\"jsonpath\",\"settings\":{\"tablePath\":\"$.responses[0].content[*]\",\"columns\":[]}}]}",
        "size": 0,
        "title": "POST to /batch",
        "queryType": 12,
        "visualization": "map",
        "mapSettings": {
          "locInfo": "LatLong",
          "latitude": "latitude",
          "longitude": "longitude",
          "sizeAggregation": "Sum",
          "defaultSize": 30,
          "labelSettings": "displayName",
          "legendAggregation": "Count",
          "itemColorSettings": {
            "nodeColorField": "longitude",
            "colorAggregation": "Sum",
            "type": "heatmap",
            "heatmapPalette": "greenRed"
          }
        }
      },
      "name": "post to batch for locations"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "{\"version\":\"ARMEndpoint/1.0\",\"data\":\"{\\r\\n\\t\\\"requests\\\": [\\r\\n\\t\\t{ \\\"httpMethod\\\": \\\"DELETE\\\", \\\"url\\\": \\\"/subscriptions/8980832b-9589-4ac2-b322-a6ae6a97f02b/resourceGroups/jgardner/providers/microsoft.insights/workbooks/ba438d46-28ae-4730-8246-163b29128bee/?api-version=2019-06-01\\\" }\\r\\n\\t]\\r\\n}\",\"headers\":[],\"method\":\"POST\",\"path\":\"/batch?api-version=2019-06-01\",\"urlParams\":[],\"batchDisabled\":false,\"transformers\":[{\"type\":\"jsonpath\",\"settings\":{\"tablePath\":\"$.responses[0].content[*]\",\"columns\":[]}}]}",
        "size": 0,
        "title": "POST to /batch + DELETE",
        "queryType": 12,
        "visualization": "table",
        "mapSettings": {
          "locInfo": "LatLong",
          "latitude": "latitude",
          "longitude": "longitude",
          "sizeAggregation": "Sum",
          "defaultSize": 30,
          "labelSettings": "displayName",
          "legendAggregation": "Count",
          "itemColorSettings": {
            "nodeColorField": "longitude",
            "colorAggregation": "Sum",
            "type": "heatmap",
            "heatmapPalette": "greenRed"
          }
        }
      },
      "name": "post to batch for delete"
    }
  ],
   "$schema": "https://github.com/Microsoft/Application-Insights-Workbooks/blob/master/schema/workbook.json"
}